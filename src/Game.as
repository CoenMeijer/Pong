package src {	import flash.display.MovieClip;	import flash.events.KeyboardEvent;	import flash.events.Event;	import flash.events.MouseEvent;	import flash.media.*;	/**	 * ...	 * @author Coen Meijer	 */	public class Game extends MovieClip	{				//player variables		private var player:MovieClip = new Player(1);		private var player2:MovieClip = new Player(2);		private var playerUp:Boolean = false;		private var playerDown:Boolean = false;		private var player2Up:Boolean = false;		private var player2Down:Boolean = false;				//ball variables		private var ball:Ball;		private var badBall:BadBall = new BadBall();				//GUI variables		private var gui:GUI = new GUI();		private var backgroundArt:MovieClip = new BackgroundArt();				//Sound		private var gameAudio:Audio = new Audio();		private var gameSoundCh:SoundChannel = new SoundChannel();				public function Game() 		{			gameSoundCh = gameAudio.mainAudio.play();			addChild(backgroundArt);			addChild(badBall);			ball = new Ball();			addChild(ball);			addChild(gui);			player.x = 20;			player.y = 200;			player2.y= 200;			player2.x = 530;			addChild(player);			addChild(player2);			addEvents();		}				private function addEvents():void		{			addEventListener(Event.ENTER_FRAME, gameLoop);			//stage.addEventListener(KeyboardEvent.KEY_DOWN, movements);			//stage.addEventListener(KeyboardEvent.KEY_UP, stopper);		}				public function movements(e:KeyboardEvent):void		{			if(e.keyCode == 87)			{				playerUp = true;			}						if(e.keyCode == 38)			{				player2Up = true;			}						if(e.keyCode == 40)			{				player2Down = true;			}						if(e.keyCode == 83)			{				playerDown = true;			}		}				public function stopper(e:KeyboardEvent):void		{			if(e.keyCode == 87)			{				playerUp = false;			}						if(e.keyCode == 83)			{				playerDown = false;			}						if(e.keyCode == 38)			{				player2Up = false;			}						if(e.keyCode == 40)			{				player2Down = false;			}		}				private function gameLoop(e:Event):void		{			gui.update();						if(contains(ball))			{				ball.update();			}						if(contains(ball) && ball._remove)			{				removeChild(ball);				ball._remove = false;				ball._timer.start();			}						if(ball._add)			{				ball._add = false;				ball.x = Main.STAGE.stageWidth/2;				ball.y = Main.STAGE.stageHeight/2;				addChild(ball);			}						if(contains(badBall) && badBall._noUpdate == false)			{				badBall.update();			}						if (ball._addPP1) {				gui._scorePlayerOne ++;				ball._addPP1 = false;			}						else if (ball._addPP2) {				gui._scorePlayerTwo += 1;				ball._addPP2 = false;			}						if(player._stun == false)			{				if(playerUp && player.y > 44)				{					player.y-=player._speed;				}								if(playerDown && player.y < 356)				{					player.y+=player._speed;				}			}						if(player2._stun == false)			{				if(player2Up && player2.y > 44)				{					player2.y-=player._speed;				}								if(player2Down && player2.y < 356)				{					player2.y+=player._speed;				}			}						if(player.hitTestObject(ball._art.inside_ball)==true)			{				if(ball._velocity.x <= 2)				{					if(contains(ball))					{						gameSoundCh = gameAudio.hitAudio.play();					}					ball._velocity.x *= -1.1;					ball._velocity.y = ball.angle(player.y, ball.y);				}			}						if(player2.hitTestObject(ball._art.inside_ball)==true)			{				if(ball._velocity.x >= 2)				{					if(contains(ball))					{						gameSoundCh = gameAudio.hitAudio.play();					}					ball._velocity.x *= -1.1;					ball._velocity.y = ball.angle(player2.y, ball.y);				}			}						if(contains(badBall))			{				if(player.hitTestObject(badBall._art.inside)==true)				{					if(badBall._sound == false)					{						gameSoundCh = gameAudio.badAudio.play();						badBall._remover.start();						badBall._sound = true;					}					badBall._art.gotoAndStop(2);					badBall._noUpdate = true;					player._stun = true;					player._timer.start();					badBall._timer.start();				}								if(player2.hitTestObject(badBall._art.inside)==true)				{					if(badBall._sound == false)					{						gameSoundCh = gameAudio.badAudio.play();						badBall._remover.start();						badBall._sound = true;					}					badBall._art.gotoAndStop(2);					badBall._noUpdate = true;					player2._stun = true;					player2._timer.start();					badBall._timer.start();				}			}						if(badBall._newBall)			{				badBall._newBall = false;				badBall._position.x = Main.STAGE.stageWidth/2;				badBall._position.y = Main.STAGE.stageHeight/2;				badBall.x = Main.STAGE.stageWidth/2;				badBall.y = Main.STAGE.stageHeight/2;				addChild(badBall);			}						if(badBall._removeNow && contains(badBall))			{				badBall._removeNow = false;				removeChild(badBall);			}						if(gui._P1Wins)			{							}						if(gui._P2Wins)			{							}		}	}}